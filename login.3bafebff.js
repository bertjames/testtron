webpackJsonp([2],{4:function(e,t,a){"use strict";function i(){(0,r.tronAjax)({url:"/api/v1/account/get_jsaddr",success:function e(t){0===t.code&&$("head").append('<script type="text/javascript" src="'+t.data.url+'"><\/script>')}})}a(5);var r=a(0),s=$(".emailerror"),c=$(".pwderror"),d=$(".email"),n=$(".password"),o=$(".signerror"),l=document.getElementById("TCaptcha"),p=$("button");i(),$("#login").submit(function(e){e.preventDefault(),d.trigger("change"),n.trigger("change"),(0,r.verifyEmail)(d.val())&&(0,r.verifyPwd)(n.val())&&(l.classList.remove("hide"),capInit(l,{callback:function e(t){0==t.ret?(l.classList.add("hide"),p.attr("disabled","disabled").text("登录中..."),(0,r.tronAjax)({url:"/api/v1/account/signin_email",type:"POST",data:{email:d.val(),password:calcMD5(n.val()),ticket:t.ticket},success:function e(t){p.removeAttr("disabled").text("登录"),t.code?(capDestroy(),i(),o.text(t.msg).removeClass("hide"),setTimeout(function(){o.addClass("hide")},3e3)):(localStorage.setItem("tron_userinfo",JSON.stringify(t.data)),location.replace((0,r.getUrlParam)("redirect")||"/"))}})):(capDestroy(),i(),l.classList.add("hide"))},showHeader:!0,type:"popup",firstvrytype:2}))}),d.change(function(e){(0,r.verifyEmail)(d.val())?s.addClass("hidden"):s.removeClass("hidden")}),n.change(function(e){(0,r.verifyPwd)(n.val())?c.addClass("hidden"):c.removeClass("hidden")})},5:function(e,t){}},[4]);