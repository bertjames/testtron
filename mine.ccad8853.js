webpackJsonp([1],{8:function(t,a,e){"use strict";function i(t){H.text(t),clearTimeout(J),J=setTimeout(function(){H.text("")},3e3)}function d(){var t=tt.offset().left,a=tt.offset().top,e=tt.width(),i=tt.height();W.removeClass("hide").css({top:a+($(window).height()-at-W.height()<0?-W.height()-i:i)+"px",left:t+e+"px"})}e(9);var s=e(0),n=JSON.parse(localStorage.getItem("tron_userinfo")),r=$(".nickname"),o=$(".editnickname"),c=$(".personemail"),l=$(".personstatus"),u=$(".emailverify"),h=$(".resetpwd"),f=$(".editform"),m=$(".resetpwdbtn"),p=$(".dialog"),v=$(".password"),x=$(".cpassword"),g=$(".pwderror"),w=$(".cpwderror"),_=$(".rpwderror"),b=$(".tip"),C=$(".persionbtns"),y=$(".accounts li .chargebtn"),k=$(".available"),T=$(".frost"),A=$(".charge"),S=$(".charge h2 span"),j=document.querySelector(".chargecode"),E=$(".chargeaddr"),H=$(".tips"),P=$(".myicoplans"),O=$(".myicoplan"),R=$(".myicoitems"),q=$(".withdraw_dialog"),z=$(".dialogtip"),J=0,N=null;r.children("span").text(n.name),o.val(n.name),c.text(n.email),n.state&&(l.text("已激活").addClass("personactived"),C.addClass("emailactive")),P.click(function(){O.removeClass("hide"),(0,s.tronAjax)({url:"/api/v1/ico/bill",data:{uid:n.uid,session_data:n.session_data},success:function t(a){a.data.list.length&&(R.html(""),a.data.list.forEach(function(t){R.append('<div class="cointype"><b>已完成</b><span>'+t.name+"</span><p>投资金额<i>"+(t.quantity_real+t.name)+"</i></p></div>")}))}})}),$(".myicoplanclose").click(function(){O.addClass("hide")}),$(".editor").click(function(t){r.addClass("hide"),f.removeClass("hide")}),f.submit(function(t){t.preventDefault();var a=o.val();a&&(0,s.verifyName)(a)?(b.text(""),f.children("button").eq(0).attr("disabled","disabled").text("提交中..."),(0,s.tronAjax)({url:"/api/v1/account/modify_info",type:"post",data:{uid:n.uid,name:a,session_data:n.session_data},success:function t(e){f.children("button").eq(0).removeAttr("disabled").text("提交"),e.code?b.text(e.msg):(n.name=a,localStorage.setItem("tron_userinfo",JSON.stringify(n)),f.addClass("hide"),r.removeClass("hide").children("span").text(a))}})):b.text("昵称限制2-12个字符，不包含空格")}),$(".editcancel").click(function(t){b.text(""),o.val(n.name),f.addClass("hide"),r.removeClass("hide")}),u.click(function(){u.attr("disabled","disabled").text("正在发送邮件..."),(0,s.tronAjax)({url:"/api/v1/account/send_active",type:"post",data:{uid:n.uid,session_data:n.session_data},success:function t(a){u.removeAttr("disabled").text("激活账号"),p.removeClass("hide"),$(".success, .fail").addClass("hide"),0==a.code?$(".success").removeClass("hide").children("p").text("请确认您邮箱中的邮件，完成账号激活。"):20003==a.code||20004==a.code?($(".success").removeClass("hide").children("p").text(a.msg),20004==a.code&&(l.text("已激活").addClass("personactived"),C.addClass("emailactive"))):$(".fail").removeClass("hide").children("p").text(a.msg)}})}),m.click(function(t){h.removeClass("hide")}),v.change(function(){(0,s.verifyPwd)(v.val())?g.addClass("hidden"):g.removeClass("hidden")}),x.change(function(){x.val()!=v.val()?w.removeClass("hidden"):w.addClass("hidden")}),h.click(function(t){$(this).addClass("hide").find("input[type=password]").val("")}),$(".resetpwd form").submit(function(t){t.preventDefault(),v.trigger("change"),x.trigger("change"),""!=v.val()&&(0,s.verifyPwd)(v.val())&&x.val()==v.val()&&(h.find("button").attr("disabled","disabled").text("正在提交..."),(0,s.tronAjax)({url:"/api/v1/account/modify_password",type:"POST",data:{uid:n.uid,password:calcMD5(v.val()),session_data:n.session_data},success:function t(a){h.find("button").removeAttr("disabled").text("提交"),a.code?(_.text(a.msg).removeClass("hide"),setTimeout(function(){_.addClass("hide")},3e3)):(n=a.data,localStorage.setItem("tron_userinfo",JSON.stringify(a.data)),h.addClass("hide").find("input[type=password]").val(""))}}))}).click(function(t){t.stopPropagation()}),$(".dialog span").click(function(t){p.addClass("hide")}),(0,s.tronAjax)({url:"/api/v1/account/coin_info",data:{uid:n.uid,session_data:n.session_data},success:function t(a){0===a.code?(N=a.data,Object.keys(a.data).forEach(function(t){var e=$(".accounts section[coin_id="+a.data[t].coin_id+"]");e.find(".chargebtn").attr({coin_id:a.data[t].coin_id,address:a.data[t].address}),e.find(".available").text(a.data[t].current),e.find(".frost").text(a.data[t].locked),a.data[t].current<=0&&$('.withdrawbtn[coin_id="'+a.data[t].coin_id+'"]').attr("disabled","disabled")})):i(a.msg)}}),y.click(function(){if($(this).hasClass("unstart"))return void z.removeClass("hide").find("h2").text("暂未开放");var t=$(this),a=t.attr("coin_id"),e=t.attr("address");A.removeClass("hide"),S.text(t.siblings(".cash").children(".available").text()+t.attr("coin_name")),a&&e?(E.text(e),new QRCode(j,{text:e,width:130,height:130})):(0,s.tronAjax)({url:"/api/v1/account/coin_info",data:{uid:n.uid,session_data:n.session_data,coin_id:a},success:function e(d){0==d.code?(N=d.data,d.data=d.data[a],S.text(d.data.current+t.attr("coin_name")),t.attr("address",d.data.address),E.text(d.data.address),new QRCode(j,{text:d.data.address,width:130,height:130})):(A.addClass("hide"),i(d.msg))}})}),$(".charge b").click(function(){A.addClass("hide"),$(j).html(""),j.innerHTML=""});var X=$(".withdraw_address"),Z=$(".withdraw_number"),B=$(".withdraw_confirm"),I=$(".wdc_num"),D=$(".wdc_addr"),F=$(".current_trx"),L=$(".max_trx"),M=$(".withdraw_tip"),Q=0,G=0,V=!1,Y=!1,K={1:{fee:.001,unit:"BTC",addrtext:"请输入您要提现到的比特币钱包地址",feetext:"矿工费固定为0.001BTC，将从您的提现数额中扣除，余额小于0.001BTC不可提现",confirm:"提交申请后，BTC将在24小时内到达您的钱包地址",reg:/^[123mn][a-km-zA-HJ-NP-Z0-9]{26,33}$/},2:{fee:.002,unit:"ETH",addrtext:"请输入您要提现到的以太坊钱包地址",feetext:"矿工费固定为0.002ETH，将从您的提现数额中扣除，余额小于0.002ETH不可提现",confirm:"提交申请后，ETH将在24小时内到达您的钱包地址",reg:/^[\da-zA-Z]{40}$|^[\da-zA-Z]{42}$/},5:{fee:410,unit:"TRX",addrtext:"请输入您要提现到的以太坊钱包地址",feetext:"提现将扣除100TRX作为手续费，余额小于100TRX不可提现。",confirm:"提交申请后，TRX将在12小时内到达您的钱包地址",reg:/^[\da-zA-Z]{40}$|^[\da-zA-Z]{42}$/}},U=0;$(".withdrawbtn").click(function(){var t=$(this).attr("coin_id");U=t,q.removeClass("hide"),$(".withdraw_addr p").text(K[t].addrtext),$(".unit").text(K[t].unit),G=parseFloat(N[t].withdraw,10),G<=0&&(G=0),F.text(N[t].current+K[t].unit),L.text(G+K[t].unit),$(".withdraw_num h2").text(K[t].feetext),$(".extra_confirm").html("<p>"+K[t].confirm+"</p>")}),X.change(function(){var t=$(this).val(),a=$(this).siblings(".error");if(K[U].reg.test(t))return a.text(""),void(V=!0);a.text("钱包地址有误"),V=!1}),Z.change(function(){var t=$(this).val(),a=$(this).siblings(".error");G<=0?(a.text("余额不足"),Y=!1):/^([1-9]+(\d+)?(.\d+)?)$|^(0.(\d+)?[1-9]+(\d+)?)$/.test(t)?t-0>G?(a.text("输入的金额不能大于可提现金额"+G),Y=!1):(Y=!0,a.text("")):(a.text("输入的金额有误"),Y=!1)}),$(".withdraw_num button").click(function(){X.trigger("change"),Z.trigger("change"),Y&&V&&(q.addClass("hide"),B.removeClass("hide").find(".error").text(""),I.text(Z.val()+K[U].unit),D.text(X.val()))}),$(".withdraw_dialog a").click(function(){q.addClass("hide"),X.val("").siblings(".error").text(""),Z.val("").siblings(".error").text("")}),$(".withdraw_cancelbtn").click(function(){B.addClass("hide"),I.text(0),D.text(""),Z.val(""),X.val("")}),$(".withdraw_confirmbtn").click(function(){var t=$(this);t.attr("disabled","disabled").text("提交中...").siblings(".withdraw_cancelbtn").attr("disabled","disabled"),(0,s.tronAjax)({url:"/api/v1/withdraw/withdraw_bill",type:"POST",data:{uid:n.uid,session_data:n.session_data,address:X.val(),coin_id:U,quantity:Z.val()},success:function a(e){t.removeAttr("disabled").text("确认").siblings(".withdraw_cancelbtn").removeAttr("disabled"),e.code?t.siblings(".error").text(e.msg):(M.addClass("withdraw_tip_show"),setTimeout(function(){M.removeClass("withdraw_tip_show")},3e3),t.siblings(".error").text(""),B.addClass("hide"),X.val(""),Z.val(""),$('.available[coin_id="'+U+'"]').text((N[U].current-Z.val()-K[U].fee).toFixed(2)))}})}),z.click(function(){z.addClass("hide")});var W=$(".trxplan"),tt=$(".scan"),at=0;tt.click(function(t){t.stopPropagation(),at=t.clientY,W.html('<p class="trxplanload">查询中...</p>'),d(),(0,s.tronAjax)({url:"/api/v1/account/thaw_info",type:"GET",data:{uid:n.uid,session_data:n.session_data},success:function t(a){a.code?W.html('<p class="trxplanload">'+a.msg+"</p>"):(W.html(a.data.length?a.data.map(function(t){return"<p>解冻日期："+t.thaw_time.split(" ")[0]+"  解冻额度："+t.thaw_quota+"TRX</p>"}).join(""):'<p class="trxplanload">暂无记录</p>'),d())}})}),W.click(function(t){t.stopPropagation()}),$(document).click(function(t){W.addClass("hide")});var et="visibilitychange",it="hidden",dt="visibilityState";["webkit","moz","ms","o"].forEach(function(t){t+"Hidden"in document&&(it=t+"Hidden",et=t+"visibilitychange",dt=t+"VisibilityState")}),document.addEventListener(et,function(){if(!document[it]){var t=JSON.parse(localStorage.getItem("tron_userinfo"));n.uid!=t.uid?location.reload():n=t}})},9:function(t,a){}},[8]);